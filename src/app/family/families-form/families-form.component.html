<cnstll-family-form *ngIf="currentlyEditingFamily" [familyToEdit]="currentlyEditingFamily"
                    [editing]="!isCurrentFamilyNew()" (newFamilySaver)="newFamilySaved($event)"
                    (editedFamilySaver)="editedFamilySaved($event)"></cnstll-family-form>
<mat-card *ngIf="!currentlyEditingFamily">
  <mat-card-header>
    <mat-card-title><h3>Family/Case Records</h3></mat-card-title>
  </mat-card-header>
  <mat-card-content [style.overflow]="'auto'" [style.height.px]="'400'">
    <mat-grid-list cols="3" rowHeight="fit" style="height: 400px">
      <mat-grid-tile [colspan]="3" *ngIf="families.length==0">
        <h2>No Families Stored.</h2>
      </mat-grid-tile>
      <mat-grid-tile *ngFor="let family of families;index as index;last as last">
        <div>
          <h2 [ngClass]="['family-tile-header', 'family-name']" *ngIf="!expanded[index]" (click)="toggleExpanded(index)">
            {{ family.getFamilyNameLongForm() }}
          </h2>
          <p *ngIf="!expanded[index]">
            <button mat-button (click)="editFamily(index)">Edit</button>
          </p>
          <cnstll-family-list-panel *ngIf="expanded[index]&&!currentlyEditingFamily" [family]="family"
                                    (close)="toggleExpanded(index)"
                                    (selectFamilyAndFamilyMember)="doSelectFamilyAndFamilyMember($event)"></cnstll-family-list-panel>
        </div>
      </mat-grid-tile>
    </mat-grid-list>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button (click)="addFamily($event)">Add a new family...</button>
  </mat-card-actions>
</mat-card>
