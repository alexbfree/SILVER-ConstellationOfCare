<div class="main-page">
  <mat-toolbar color="primary">
    <mat-toolbar-row>
      <span>SILVER Health Data Interface</span>
      <span class="toolbar-spacer"></span>
      <div *ngIf="username">
        <cnstll-family-chooser-button #familyChooserButton [family]="family" (familySelect)="setFamily($event)"></cnstll-family-chooser-button>
        <cnstll-family-member-chooser-button #familyMemberChooserButton *ngIf="family" [family]="family" [familyMember]="familyMember" (selectFamilyMember)="managementMode=false;setFamilyMember($event)"></cnstll-family-member-chooser-button>
        <cnstll-case-management-button *ngIf="!managementMode" #caseManagementButton [username]="username" (launchCaseManagementScreen)="family=null;familyMember=null;managementMode=true;"></cnstll-case-management-button>
      </div>
      <button mat-button (click)="doOpenLoginDialog()">
        <mat-icon>home</mat-icon>
        <span *ngIf="username" title="Click to change user"> {{username}} </span>
        <span *ngIf="! username"> Login </span>
      </button>
    </mat-toolbar-row>
  </mat-toolbar>

  <cnstll-mig-information #miginformation *ngIf="familyMember" [familyMember]="familyMember"></cnstll-mig-information>
  <cnstll-case-management-screen #caseManagementScreen *ngIf="managementMode" [username]="username"> </cnstll-case-management-screen>
</div>
