<mat-card [className]="'no-padding'">
  <mat-card-header>
    <mat-card-title [className]="'no-bottom-margin'"><h3 [style.margin]="'0px auto'">Filtering Controls</h3>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div fxLayout="row" fxLayoutAlign="start center" style="margin-left:10px;margin-top:10px;">
      <div fxFlex="10%"></div>
      <div fxFlex="80%" fxLayout="row" fxLayoutAlign="space-between">
        <mat-form-field>
          <mat-label>Start Date:</mat-label>
          <input matInput #startDate [matDatepicker]="startDatePicker" placeholder="e.g. 1/1/2017" type="text"
                 class="startDate" name="startDate" [value]="current_start_date"
                 (dateInput)="dateChanged('startDate',$event)" (dateChange)="dateChanged('startDate',$event)">
          <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
          <mat-datepicker startAt="multi-year" #startDatePicker></mat-datepicker>
        </mat-form-field>
        <mat-form-field>
          <mat-label>End Date:</mat-label>
          <input matInput #endDate [matDatepicker]="endDatePicker" placeholder="e.g. 1/1/2019" type="text"
                 class="endDate" name="endDate" [value]="current_end_date"
                 (dateInput)="dateChanged('endDate',$event)" (dateChange)="dateChanged('endDate',$event)">
          <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
          <mat-datepicker startAt="multi-year" #endDatePicker></mat-datepicker>
        </mat-form-field>
        <mat-form-field>
          <mat-select placeholder="Select Record Type" [disableOptionCentering]="true" [formControl]="data_type_filter"
                      multiple (selectionChange)="data_types_changed($event)">
            <mat-select-trigger>
              {{check_if_all_data_types_selected() ? 'All' : data_type_filter.value.join(", ")}}
            </mat-select-trigger>
            <mat-option *ngFor="let data_type of data_type_list" [value]="data_type">{{data_type}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div *ngIf="unified_events && filtered_events && filtered_events.length==0" fxLayout="row"
         fxLayoutAlign="start center">
      <div fxFlex="100%">
        <span [style.display]="'block'" [style.textAlign]="'center'" [className]="'filter-warning'">There are no records available meeting the above criteria. All {{unified_events.length}} records have been hidden. Please expand the date range or remove some filters.
          <button
            mat-stroked-button class="btn btn-secondary" (click)="showAllData()">Show All Records</button>
          <button
            mat-stroked-button class="btn btn-secondary"
            (click)="showLastTwoYears()">Show Last 2 Years Only</button></span>
      </div>
    </div>
    <div
      *ngIf="unified_events && filtered_events && filtered_events.length>0 && unified_events.length>filtered_events.length"
      fxLayout="row"
      fxLayoutAlign="start center">
      <div fxFlex="100%">
        <span [style.display]="'block'" [style.textAlign]="'center'" [className]="'filter-warning'">Note: The data shown below has been filtered. {{unified_events.length-filtered_events.length}} of the {{unified_events.length}} available event records are currently hidden.
          <button
            mat-stroked-button class="btn btn-secondary" (click)="showAllData()">Show All Records</button>
          <button
            mat-stroked-button class="btn btn-secondary"
            (click)="showLastTwoYears()">Show Last 2 Years Only</button></span>
      </div>
    </div>
    <div *ngIf="unified_events && (!filtered_events || filtered_events.length==unified_events.length)" fxLayout="row"
         fxLayoutAlign="start center">
      <div fxFlex="100%">
        <span [style.display]="'block'" [style.textAlign]="'center'" [className]="'filter-warning'">Showing all {{unified_events.length}} event records.
          <button
            mat-stroked-button class="btn btn-secondary"
            (click)="showLastTwoYears()">Show Last 2 Years Only</button></span>
      </div>
    </div>
  </mat-card-content>
</mat-card>
